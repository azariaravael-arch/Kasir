# ğŸ“± Sistem Kasir POS - Architecture Overview

## ğŸ—ï¸ Application Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KASIR POS SYSTEM                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€ PRESENTATION LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  POS View    â”‚  â”‚   Products   â”‚  â”‚   Reports    â”‚       â”‚
â”‚  â”‚  (index)     â”‚  â”‚   (CRUD)     â”‚  â”‚  (Daily/Mo)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€ APPLICATION LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Controllers                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ SaleController (POS, transaksi, struk)            â”‚ â”‚
â”‚  â”‚  â”œâ”€ ProductController (CRUD + live search)            â”‚ â”‚
â”‚  â”‚  â””â”€ ReportController (laporan, grafik)                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Middleware                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ auth (user login check)                            â”‚ â”‚
â”‚  â”‚  â””â”€ admin (admin-only access)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Form Requests                          â”‚ â”‚
â”‚  â”‚  â””â”€ StoreSaleRequest (validasi transaksi)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€ BUSINESS LOGIC LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Service Layer                              â”‚ â”‚
â”‚  â”‚  â””â”€ SaleService::createSale() [DB Transaction]          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Observers                                  â”‚ â”‚
â”‚  â”‚  â””â”€ ProductObserver::updated() [Auto stock update]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€ DATA ACCESS LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Product    â”‚  â”‚    Sale      â”‚  â”‚  SaleItem    â”‚       â”‚
â”‚  â”‚   Model      â”‚  â”‚   Model      â”‚  â”‚   Model      â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ - scopeActiveâ”‚  â”‚ - relations  â”‚  â”‚ - relations  â”‚       â”‚
â”‚  â”‚ - scopeSearchâ”‚  â”‚ - user()     â”‚  â”‚ - product()  â”‚       â”‚
â”‚  â”‚ - hasStock() â”‚  â”‚ - items()    â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€ DATABASE LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      MySQL 8                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚  â”‚  users   â”‚ â”‚products â”‚ â”‚sales â”‚ â”‚sale_items â”‚      â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ User Flow Diagram

### **POS Checkout Flow**

```
START (Login Kasir)
    â†“
    [Browse Products]
    â†“
    [Live Search AJAX]
        â†“ (fetch /pos/search?q=keyword)
        â†’ Backend: Product::search()->active()->get()
        â†’ Return JSON
        â†“ (render results)
    â†“
    [Add to Cart] Ã— multiple
        â†“
        items.push({product_id, qty, price})
        â†“
    â†“
    [Review Cart]
        â”œâ”€ Adjust qty (+/-)
        â”œâ”€ Remove item
        â””â”€ Apply discount
    â†“
    [Checkout Button]
        â†“
        POST /pos
        {items: [...]}
        â†“
        SaleController::store()
        â†“
        StoreSaleRequest (validate)
        â†“
        SaleService::createSale()
        â†“
        DB::transaction() {
            1. Create Sale
            2. Create SaleItems
            3. Product::decrement() â†’ ProductObserver::updated()
        }
        â†“
    â†“
    [Generate Receipt]
        â†“
        Redirect /pos/{sale}/receipt
        â†“
    â†“
    [Display Struk]
        â”œâ”€ Show data
        â”œâ”€ Print button
        â””â”€ Back to POS
    â†“
END
```

### **Admin Workflow**

```
Admin Login
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                                     â†“
[Product Management]                [Reports & Analytics]
    â”œâ”€ List produk                   â”œâ”€ Daily report
    â”œâ”€ Create produk                 â”‚   â””â”€ Filter by date
    â”œâ”€ Edit produk                   â”‚
    â”œâ”€ Delete produk                 â”œâ”€ Monthly report
    â””â”€ Stock management              â”‚   â”œâ”€ Filter by month
                                     â”‚   â””â”€ Chart.js visualization
                                     â””â”€ Export (future)
```

---

## ğŸ” Security & Access Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Authentication (Login)             â”‚
â”‚  â”œâ”€ Email & Password verification          â”‚
â”‚  â”œâ”€ User role stored: admin / kasir         â”‚
â”‚  â””â”€ Session management                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Authorization (Role-based)           â”‚
â”‚                                             â”‚
â”‚  PUBLIC ROUTES (No Auth):                  â”‚
â”‚  â”œâ”€ GET /                                   â”‚
â”‚  â”œâ”€ GET /login                              â”‚
â”‚  â””â”€ POST /register                          â”‚
â”‚                                             â”‚
â”‚  AUTH ROUTES (Login Required):             â”‚
â”‚  â”œâ”€ GET /pos           â† Kasir & Admin     â”‚
â”‚  â”œâ”€ POST /pos          â† Kasir & Admin     â”‚
â”‚  â””â”€ GET /dashboard     â† Any authenticated â”‚
â”‚                                             â”‚
â”‚  ADMIN ONLY ROUTES (Admin Middleware):     â”‚
â”‚  â”œâ”€ /admin/products/*  â† Admin only        â”‚
â”‚  â”œâ”€ /admin/reports/*   â† Admin only        â”‚
â”‚  â””â”€ AdminMiddleware checks: auth()->user()->isAdmin()
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Database Relationships

```
users (1)
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1:N) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ sales
  â”‚                                      â†“ (1:N)
  â”‚                                   sale_items
  â”‚                                      â†“ (N:1)
  â”‚                                   products
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Detailed:

users
â”œâ”€â”€ id (PK)
â”œâ”€â”€ name
â”œâ”€â”€ email
â”œâ”€â”€ role [admin|kasir]
â””â”€â”€ relations:
    â””â”€â”€ sales() â†’ hasMany(Sale)

sales
â”œâ”€â”€ id (PK)
â”œâ”€â”€ invoice (unique)
â”œâ”€â”€ user_id (FK)
â”œâ”€â”€ total
â””â”€â”€ relations:
    â”œâ”€â”€ user() â†’ belongsTo(User)
    â””â”€â”€ items() â†’ hasMany(SaleItem)

sale_items
â”œâ”€â”€ id (PK)
â”œâ”€â”€ sale_id (FK)
â”œâ”€â”€ product_id (FK)
â”œâ”€â”€ qty
â”œâ”€â”€ price
â”œâ”€â”€ subtotal
â””â”€â”€ relations:
    â”œâ”€â”€ sale() â†’ belongsTo(Sale)
    â””â”€â”€ product() â†’ belongsTo(Product)

products
â”œâ”€â”€ id (PK)
â”œâ”€â”€ name (unique)
â”œâ”€â”€ sku (unique)
â”œâ”€â”€ price
â”œâ”€â”€ stock
â””â”€â”€ relations:
    â””â”€â”€ saleItems() â†’ hasMany(SaleItem)
```

---

## ğŸ”„ Request/Response Cycle

### **Example: Create Sale (Checkout)**

```
â”Œâ”€ CLIENT SIDE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  1. User click "Checkout"             â”‚
â”‚     â””â”€ items = [{...}, {...}]         â”‚
â”‚                                       â”‚
â”‚  2. Fetch POST /pos                   â”‚
â”‚     â”œâ”€ headers: {                     â”‚
â”‚     â”‚   'Content-Type': 'json',       â”‚
â”‚     â”‚   'X-CSRF-TOKEN': '...'         â”‚
â”‚     â”‚ }                               â”‚
â”‚     â””â”€ body: {items: [...]}           â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ SERVER SIDE (Laravel) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  1. Route match: POST /pos            â”‚
â”‚     â””â”€ SaleController::store()        â”‚
â”‚                                       â”‚
â”‚  2. Form Request Validation           â”‚
â”‚     â”œâ”€ StoreSaleRequest               â”‚
â”‚     â”œâ”€ Check: items, product_id, qty â”‚
â”‚     â””â”€ Check: auth user, isAdmin      â”‚
â”‚                                       â”‚
â”‚  3. SaleService::createSale()         â”‚
â”‚     â””â”€ DB::transaction() {            â”‚
â”‚        1. Create Sale                 â”‚
â”‚        2. Create SaleItems            â”‚
â”‚        3. Decrement Product stock     â”‚
â”‚           â””â”€ ProductObserver::updated â”‚
â”‚                Log stock = 0          â”‚
â”‚        4. Return Sale record          â”‚
â”‚     }                                 â”‚
â”‚                                       â”‚
â”‚  4. Response JSON                     â”‚
â”‚     â”œâ”€ success: true                  â”‚
â”‚     â”œâ”€ invoice: 'INV-20260205-XXXXX'  â”‚
â”‚     â””â”€ sale_id: 123                   â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ CLIENT SIDE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  1. Receive response                  â”‚
â”‚                                       â”‚
â”‚  2. If success:                       â”‚
â”‚     â”œâ”€ Alert: "Transaksi berhasil"   â”‚
â”‚     â”œâ”€ Clear cart items               â”‚
â”‚     â””â”€ Redirect to /pos/{id}/receipt  â”‚
â”‚                                       â”‚
â”‚  3. Display Struk                     â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow: Live Search

```
â”Œâ”€ CLIENT SIDE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  Input: "Ayam"                        â”‚
â”‚  â†“                                    â”‚
â”‚  Trigger: keyup event                 â”‚
â”‚  â†“                                    â”‚
â”‚  Fetch GET /pos/search?q=Ayam         â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ SERVER SIDE (Laravel) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  1. Route match: GET /pos/search      â”‚
â”‚     â””â”€ SaleController::search()       â”‚
â”‚                                       â”‚
â”‚  2. Get query parameter: q='Ayam'     â”‚
â”‚                                       â”‚
â”‚  3. Query products:                   â”‚
â”‚     Product::search('Ayam')           â”‚
â”‚     â”‚ â†“ (scope method)                â”‚
â”‚     â”‚ WHERE (name LIKE '%Ayam%'       â”‚
â”‚     â”‚    OR sku LIKE '%Ayam%')        â”‚
â”‚     â”‚ AND stock > 0                   â”‚
â”‚     â”‚ LIMIT 10                        â”‚
â”‚     â””â”€ Get 2 results:                 â”‚
â”‚        [{id:1, name:'Ayam Goreng',...}â”‚
â”‚         {id:7, name:'Bakso',...}]    â”‚
â”‚                                       â”‚
â”‚  4. Response JSON                     â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ CLIENT SIDE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  1. Receive JSON array                â”‚
â”‚                                       â”‚
â”‚  2. Update DOM: #productList          â”‚
â”‚     â”œâ”€ Clear existing                 â”‚
â”‚     â”œâ”€ Loop results                   â”‚
â”‚     â””â”€ Append product cards           â”‚
â”‚                                       â”‚
â”‚  3. Attach event listeners            â”‚
â”‚     â””â”€ Each card: onclick add-to-cart â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Chart.js Data Flow

```
â”Œâ”€ MONTHLY REPORT PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  User opens: /admin/reports/monthly   â”‚
â”‚  Select: 2026-02                      â”‚
â”‚  â†“                                    â”‚
â”‚  Template loads: reports/monthly.bladeâ”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ CONTROLLER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  ReportController::monthly()          â”‚
â”‚  â”œâ”€ Query sales between dates         â”‚
â”‚  â”œâ”€ Calculate totals                  â”‚
â”‚  â”œâ”€ Group by date:                    â”‚
â”‚  â”‚  SELECT DATE(created_at),          â”‚
â”‚  â”‚         SUM(total)                 â”‚
â”‚  â”‚  GROUP BY DATE(created_at)         â”‚
â”‚  â””â”€ Return chartData collection       â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€ VIEW (Blade Template) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       â”‚
â”‚  <canvas id="chartSales"></canvas>    â”‚
â”‚  â†“                                    â”‚
â”‚  <script>                             â”‚
â”‚  const chartData = {!! json_encode($chartData) !!}
â”‚                                       â”‚
â”‚  new Chart(ctx, {                     â”‚
â”‚    type: 'bar',                       â”‚
â”‚    data: {                            â”‚
â”‚      labels: ['5 Feb','6 Feb',...],   â”‚
â”‚      datasets: [{                     â”‚
â”‚        label: 'Total (Rp)',           â”‚
â”‚        data: [500000,750000,...]      â”‚
â”‚      }]                               â”‚
â”‚    },                                 â”‚
â”‚    options: {...}                     â”‚
â”‚  });                                  â”‚
â”‚  </script>                            â”‚
â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Features Summary

| Feature | Technology | File |
|---------|-----------|------|
| **POS Interface** | Blade + Tailwind | pos/index.blade.php |
| **Live Search** | AJAX + Fetch API | SaleController::search() |
| **Shopping Cart** | Vanilla JS | pos/index.blade.php |
| **Transactions** | DB::transaction() | SaleService::createSale() |
| **Stock Update** | Observer Pattern | ProductObserver |
| **Reports** | SQL GROUP BY | ReportController |
| **Charts** | Chart.js CDN | reports/monthly.blade.php |
| **Auth** | Laravel Auth | auth middleware |
| **Authorization** | Role Middleware | AdminMiddleware |

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Browser (User Device)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Web Server (Apache/Nginx)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Laravel 11 (PHP Application)      â”‚
â”‚   â”œâ”€ Routing                        â”‚
â”‚   â”œâ”€ Controllers                    â”‚
â”‚   â”œâ”€ Business Logic                 â”‚
â”‚   â””â”€ Middleware                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ PDO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MySQL 8 Database Server          â”‚
â”‚    (users, products, sales, items)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Architecture: Clean, Scalable, Production-Ready** âœ…
